{# templates/home.html.twig #}
{{ include('/home/header.html.twig') }}
{% block body %}
	<style>
		body {
			font-family: "Lato", sans-serif;
		}

		.sidenav {
			height: 100%;
			width: 160px;
			position: fixed;
			z-index: 1;
			top: 0;
			left: 0;
			background-color: #111;
			padding-top: 65px;
		}

		.sidenav2 {
			height: 100%;
			width: 220px;
			position: fixed;
			z-index: 1;
			top: 0;
			left: 160px;
			background-color: white;
			overflow-x: hidden;
			padding-top: 65px;
			border-right-style: groove;
		}

		.sidenav a {
			padding: 6px 8px 6px 16px;
			text-decoration: none;
			font-size: 15px;
			color: #818181;
			display: block;
		}

		.sidenav a:hover {
			color: black;
		}

		.main {
			margin-left: 160px; /* Same as the width of the sidenav */
			font-size: 12px; /* Increased text to enable scrolling */
			padding: 0 10px;
		}

		@media screen and(max-height: 450px) {
			.sidenav {
				padding-top: 15px;
			}
			.sidenav a {
				font-size: 18px;
			}
		}
	</style>
</head>
<body>
	<div class="sidenav">
		<div class="input-group mb-3">
			<select class="selectpicker" id="select-repository" data-live-search="true" title="Repositories">
				{% for repository in repositories %}
					<option>{{ repository.nom }}</option>
				{% endfor %}
			</select>
		</div>
		<div class="input-group mb-3">
			<select class="selectpicker" id="select-branch" data-live-search="true" title="Branches"></select>
		</div>
	</div>
</body></div><div class="sidenav2"></div></body>
<script>
	$(document).ready(function() 
	{ 
		$("#select-repository").change(function (event) 
		{ 
			$.ajax({ 
				url: '/branches/comboBox',
            	type: 'POST',
            	datatype: 'json',
            	async: true,
            	
				success: function (data, status) { 
					var newBranches = '';
					for (i = 0;i < data.length;i++) {
						$('#select-branch').append($('<option>', { value : data[i]['name'] })
          .text(data[i]['name']));;
					} 
					$('#select-branch').selectpicker('refresh');
				}, 
				error: function (xhr, textStatus, errorThrown) { 
					alert('Ajax request failed.');
					}
				}) 
			})
			$('.selectpicker').selectpicker(); 
		}) 
	
</script> 
{% endblock %}